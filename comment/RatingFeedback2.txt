return (
  <div key={name} className="rating-feedback-content">
    <div className="rating-title">
      <span className="rating-icon">⭐</span>
      <span className="rating-text">{messageText || label}</span>
    </div>

    <div className="rating-description">
      {formatMessage({
        id: 'app.global.customField.ratingDescription',
        defaultMessage:
          'Your feedback helps us improve our ticket processing quality.',
      })}
    </div>

    {/* Rating Stars */}
    <div className="rating-stars">
      <Rate
        allowHalf
        count={maxStars}
        value={ratingValue}
        onChange={(value) => setRatingValue(value)}
      />
    </div>

    {/* ⭐ Hiển thị textarea nếu tìm thấy commentField */}
    {commentField && (
      <div className="rating-comment">
        <label className="rating-comment-label">
          {formatLabel(commentField.label, currentLocale) || 
           formatMessage({
             id: 'app.global.customField.ratingComment',
             defaultMessage: 'Comment',
           })}
        </label>
        <Input.TextArea
          rows={4}
          placeholder={formatMessage({
            id: 'app.global.customField.ratingCommentPlaceholder',
            defaultMessage: 'Tell us what you liked or how we can improve...',
          })}
          value={comment}
          onChange={(e) => setComment(e.target.value)}
          maxLength={500}
          showCount
        />
      </div>
    )}

    {/* Submit Button */}
    <div className="rating-submit">
      <Button
        type="primary"
        onClick={() => handleSubmit(name, commentField)}
        loading={submitting}
        disabled={ratingValue === 0}
      >
        {formatMessage({
          id: 'app.global.customField.submitEvaluation',
          defaultMessage: 'Submit Evaluation',
        })}
      </Button>
    </div>
  </div>
);



========


const handleSubmit = async (ratingFieldName, commentField) => {
  if (ratingValue === 0) {
    notification.warning({
      message: formatMessage({
        id: 'app.global.customField.ratingRequired',
        defaultMessage: 'Please select a rating before submitting.',
      }),
    });
    return;
  }

  setSubmitting(true);

  try {
    // ⭐ Update rating field
    const ratingRes = await dispatch({
      type: 'ticketsV2/updateCustomField',
      payload: {
        fieldName: ratingFieldName,
        value: ratingValue,
        id: record.id,
      },
    });

    if (ratingRes?.error) {
      notification.error({
        message:
          ratingRes.error.message ||
          formatMessage({
            id: 'tkm.ticket.action.error',
          }),
      });
      setSubmitting(false);
      return;
    }

    // ⭐ Update comment field nếu có
    if (commentField && comment.trim()) {
      const commentRes = await dispatch({
        type: 'ticketsV2/updateCustomField',
        payload: {
          fieldName: commentField.name,
          value: comment.trim(),
          id: record.id,
        },
      });

      if (commentRes?.error) {
        console.warn('Comment save failed:', commentRes.error);
        // Không block flow, rating đã save thành công
      }
    }

    // Show success
    Modal.success({
      title: formatMessage({
        id: 'app.global.customField.ratingSuccess.title',
        defaultMessage: 'Rating submitted successfully',
      }),
      content: formatMessage({
        id: 'app.global.customField.ratingSuccess.content',
        defaultMessage: 'Thank you for your feedback.',
      }),
    });

    setTimeout(() => {
      window.location.reload();
    }, 1500);
  } catch (error) {
    console.error('Error submitting rating:', error);
  } finally {
    setSubmitting(false);
  }
};



======




if (hasValue) {
  return (
    <div key={name} className="rating-feedback-content rated">
      <div className="rating-title">
        <span className="rating-icon">⭐</span>
        <span className="rating-text">{messageText || label}</span>
      </div>

      <div className="rating-description">
        {formatMessage({
          id: 'app.global.customField.ratingThankYou',
          defaultMessage: 'Thank you for your feedback!',
        })}
      </div>

      <div className="rating-stars">
        <Rate
          allowHalf
          disabled
          count={maxStars}
          value={Number(fieldValue)}
        />
      </div>

      {/* ⭐ Hiển thị comment nếu có */}
      {commentField && commentValue && (
        <div className="rating-comment-display">
          <div className="rating-comment-label">
            {formatLabel(commentField.label, currentLocale) ||
             formatMessage({
               id: 'app.global.customField.yourComment',
               defaultMessage: 'Your comment:',
             })}
          </div>
          <div className="rating-comment-text">
            {commentValue}
          </div>
        </div>
      )}
    </div>
  );
}